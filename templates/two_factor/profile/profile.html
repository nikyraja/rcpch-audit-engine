{% extends "two_factor/_base.html" %}
{% load i18n %}
{% load two_factor_tags %}
{% load epilepsy12_template_tags %}

{% block content %}
<div class='ui rcpch container'>
  <div class="ui two column centered grid">
    <div class="column">
      <h1>{% block title %}{% trans "Account Settings" %}{% endblock %}</h1>

      {% if default_device %}
        <p>Your method of two-factor authentication is now working.</p>
        <p>If you wish to change to a different method of authentication at any point, you can reset <a class="rcpch_blue_link" href="{% url 'two_factor:disable' %}">here</a>.</p>
          <ul>
            <!-- <li>
              {% if default_device_type == 'EmailDevice' %}
                <p>Your one-time login code will be sent to your registered email.</p>
              {% else %}
                <p>Enter the token generated by the <a class="rcpch_blue_link" href="https://www.microsoft.com/en-gb/security/mobile-authenticator-app">Microsoft Authenticator</a> app.</p>
              {% endif %}
            </li> -->
          </ul>

          {% with user_organisation_id=user|get_org_id_from_user %}
            <div class="ui buttons">
              <a href="{% url 'selected_organisation_summary' organisation_id=user_organisation_id  %}" class="ui rcpch_primary positive button">Organisation Summary</a>
              <div class="or"></div>
              <a href="{% url 'index' %}" class="ui rcpch_primary button">Home page</a>
            </div>
          {% endwith %}

      {% else %}
        <div class="ui icon rcpch_important message">
          <i class="key icon"></i>
          <div class="content">
            <div class="header">
              Enable two-factor authentication
            </div>
            <p>
            {% blocktrans trimmed %}Two-factor authentication is not enabled for your
            account. You must enable this to use the Epilepsy12 platform.{% endblocktrans %}
            </p>
            <p>
              <a href="{% url 'two_factor:setup' %}" class="rcpch_blue_link">
                {% trans "Enable two-factor authentication" %}
              </a>
            </p>
          </div>
        </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
